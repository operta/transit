<mat-card>
    <mat-card-content>
        <form [formGroup]="measureFormGroup">
            <table mat-table [dataSource]="getMeasureArray().value" class="mat-elevation-z8">

                <!-- Name Column -->
                <ng-container matColumnDef="column-name">
                    <th mat-header-cell *matHeaderCellDef> {{'name' | translate}} </th>
                    <td mat-cell *matCellDef="let element"> {{resolveName(element.measureDefinition)}} </td>
                </ng-container>

                <!-- Quantity Column -->
                <ng-container matColumnDef="column-quantity">
                    <th mat-header-cell *matHeaderCellDef> {{'quantity' | translate}} </th>
                    <td mat-cell *matCellDef="let element"> {{element.quantity}} </td>
                </ng-container>

                <!-- Action Column -->
                <ng-container matColumnDef="column-action">
                    <th mat-header-cell *matHeaderCellDef> {{'action' | translate}} </th>
                    <td mat-cell *matCellDef="let i = index">
                        <button class="btn btn-danger" (click)="deleteElement(i)">{{'delete' | translate}}
                            <mat-icon>delete</mat-icon>
                        </button>
                    </td>
                </ng-container>

                <!-- Add Name Column -->
                <ng-container matColumnDef="column-add-name">
                    <td mat-footer-cell *matFooterCellDef>
                        <app-measure-definition-select [formGroup]="measureFormGroup"></app-measure-definition-select>
                    </td>
                </ng-container>

                <!-- Add Quantity Column -->
                <ng-container matColumnDef="column-add-quantity">
                    <td mat-footer-cell *matFooterCellDef>
                        <mat-form-field appearance="outline">
                            <mat-label>{{'quantity' | translate}}</mat-label>
                            <input matInput type="number" placeholder="{{'quantity' | translate}}" name="quantity"
                                   formControlName="quantity">
                        </mat-form-field>
                    </td>
                </ng-container>

                <!-- Add Action Column -->
                <ng-container matColumnDef="column-add-action">
                    <td mat-footer-cell *matFooterCellDef>
                        <button class="btn btn-success" [disabled]="measureFormGroup.invalid" (click)="addMeasure()">
                            {{'add' | translate}}
                            <mat-icon>add</mat-icon>
                        </button>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                <tr mat-footer-row *matFooterRowDef="addColumns"></tr>
            </table>
        </form>
    </mat-card-content>
</mat-card>

